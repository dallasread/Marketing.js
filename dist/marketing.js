!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(66)},function(e,t,n){var r=n(2);n(45),n(40),n(47),n(46),n(38),n(39),n(41),n(44),n(42),n(49),n(48),n(43),e.exports=r},function(e,t,n){var r=n(9).Token,o=r.generate(function(e,t){r.call(this,e,t)});o.tokens=[],o.definePrototype({writable:!0},{indentLevel:""}),o.definePrototype({TYPE_ID:-1,toJSON:function(e){return this.JSONuseObject?this.toObject():this.toArray()},toArray:function(){return console.warn("toArray not impleneted."),[-1]},toObject:function(){var e=this;return console.warn("toObject not impleneted."),{type:e.type,TYPE_ID:e.TYPE_ID}},fromArray:function(e){var t=this;if(e[0]!==t.TYPE_ID)throw"TypeMismatch: "+e[0]+" is not "+t.TYPE_ID;t._fromArray(e)},updates:function(){console.warn("updates not impleneted.")}}),e.exports=o},function(e,t,n){var r;!function(){function o(e,t){if(typeof e!==t)throw new TypeError("Expected '"+t+"' but instead found '"+typeof e+"'")}function i(e){var t,n;return!!(e&&"object"==typeof e&&(t=Object.getOwnPropertyNames(e).sort(),n=t.length,1===n&&("get"===t[0]&&"function"==typeof e.get||"set"===t[0]&&"function"==typeof e.set)||2===n&&"get"===t[0]&&"function"==typeof e.get&&"set"===t[1]&&"function"==typeof e.set))}function a(e,t,n){var r,o,a,s={},u=n||t,c=n&&t;for(n=u&&"object"==typeof u?u:{},t=c&&"object"==typeof c?c:{},o=Object.getOwnPropertyNames(n),a=o.length,r=0;r<a;r++)i(n[o[r]])?s[o[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,get:n[o[r]].get,set:n[o[r]].set}:s[o[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,writable:!!t.writable,value:n[o[r]]};return Object.defineProperties(e,s),e}function s(){}var u={defineProperties:function(e,t){return a(this,e,t),this},getProto:function(){return Object.getPrototypeOf(this)},getSuper:function(){return Object.getPrototypeOf(this.constructor.prototype)}},c={isGeneration:function(e){o(e,"function");var t=this;return t.prototype.isPrototypeOf(e.prototype)},isCreation:function(e){var t=this;return e instanceof t},generate:function(e){o(e,"function");var t=this;return a(e,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(t.prototype)}),a(e,{configurable:!1,enumerable:!1,writable:!1},c),a(e.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:e,generator:e}),e},definePrototype:function(e,t){return a(this.prototype,e,t),this}};a(s,{configurable:!1,enumerable:!1,writable:!1},{prototype:s.prototype}),a(s.prototype,{configurable:!1,enumerable:!1,writable:!1},u),a(s,{configurable:!1,enumerable:!1,writable:!1},c),a(s,{configurable:!1,enumerable:!1,writable:!1},{isGenerator:function(e){return this.isGeneration(e)},toGenerator:function(e,t){return console.warn("Generator.toGenerator is depreciated please use Generator.generateFrom"),this.generateFrom(e,t)},generateFrom:function(e,t){return o(e,"function"),o(t,"function"),a(t,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(e.prototype)}),a(t,{configurable:!1,enumerable:!1,writable:!1},c),a(t.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:t,generator:t}),a(t.prototype,{configurable:!1,enumerable:!1,writable:!1},u),t}}),Object.freeze(s),Object.freeze(s.prototype),r=function(){return s}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}()},function(e,t,n){function r(e){var t;if(e instanceof Array)t=e;else{if("string"!=typeof e)throw"bad arrgument: expected String | Array<String>.";t=e.match(/[\/]|[.][.]/)?e.split("/"):e.split("."),t[0]||t[1]||(t=["."]);var n=t.pop().split("@");n[0]&&t.push(n[0]),n[1]&&t.push("@"+n[1])}return t}function o(e){return f.indexOf(e)!==-1}function i(e){return 65<=e&&e<=90||97<=e&&e<=122}function a(e){return 48<=e&&e<=57||65<=e&&e<=90||97<=e&&e<=122}function s(e){return 45===e||48<=e&&e<=57||65<=e&&e<=90||95===e||97<=e&&e<=122}function u(e){return 9<=e&&e<=13||32===e||160===e||5760===e||6158===e||8192<=e&&e<=8202||8232<=e&&e<=8233||8239===e||8287===e||12288===e||65279===e}function c(e){return e.replace(/(\s*)/g,function(e){return e.split("").sort(function(e,t){return e=e.codePointAt(0),t=t.codePointAt(0),160!==e&&160===t?1:160===e&&160!==t?-1:0}).join("").replace(/[^\u00a0]+/," ")})}function l(e){var t;return t=d[e.slice(1,-1)],"number"!=typeof t&&"#"===e[1]&&(t=parseInt(e.slice(2,-1),10)),"number"!=typeof t||isNaN(t)?e:String.fromCharCode(t)}var f=n(61),d=n(60);t.pathSpliter=r,t.isSelfClosing=o,t.isHTMLIdentifierStart=i,t.isHTMLEntity=a,t.isHTMLIdentifier=s,t.isWhitespace=u,t.minifyHTMLText=c,t.getHTMLUnEscape=l},function(e,t){function n(e,t){if(!e)throw new Error(t)}function r(e,t){if(typeof e!==t)throw new TypeError("Expected '"+t+"' but instead found '"+typeof e+"'")}function o(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function i(e){return e}function a(e,t,n){return n=n||i,JSON.stringify(e.slice(Math.max(0,e.index-t),e.index)).slice(1,-1)+n(JSON.stringify(e.charAt(e.index)||"EOF").slice(1,-1))+JSON.stringify(e.slice(e.index+1,Math.min(e.length,e.index+1+t))).slice(1,-1)}t.assertError=n,t.assertTypeError=r,t.repeat=o,t.varThrough=i,t.bufferSlice=a},function(e,t,n){var r=n(3),o=(n(5),r.generate(function(e,t){var n=this;n.defineProperties({code:e}),n.type=t,n.range=[e.index,e.index+1],n.loc={start:{line:e.line,column:e.column},end:{line:e.line,column:e.column+1}}}));o.definePrototype({writable:!0,enumerable:!0},{type:"ILLEGAL"}),o.definePrototype({length:{get:function(){return this.range[1]-this.range[0]}},source:function(){var e=this;return e.code.slice(e.range[0],e.range[1])},close:function(){var e=this;if(e.closed)throw new Error("Cannot call close on a closed token.");e.closed=!0,e.code.index>e.range[1]&&(e.range[1]=e.code.index,e.loc.end={line:e.code.line,column:e.code.column})}}),e.exports=o},function(e,t,n){var r;!function(){function o(e,t){if(typeof e!==t)throw new TypeError("Expected '"+t+"' but instead found '"+typeof e+"'")}function i(e){var t,n;return!!(e&&"object"==typeof e&&(t=Object.getOwnPropertyNames(e).sort(),n=t.length,1===n&&("get"===t[0]&&"function"==typeof e.get||"set"===t[0]&&"function"==typeof e.set)||2===n&&"get"===t[0]&&"function"==typeof e.get&&"set"===t[1]&&"function"==typeof e.set))}function a(e,t,n){var r,o,a,s={},u=n||t,c=n&&t;for(n=u&&"object"==typeof u?u:{},t=c&&"object"==typeof c?c:{},o=Object.getOwnPropertyNames(n),a=o.length,r=0;r<a;r++)i(n[o[r]])?s[o[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,get:n[o[r]].get,set:n[o[r]].set}:s[o[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,writable:!!t.writable,value:n[o[r]]};return Object.defineProperties(e,s),e}function s(){}var u={defineProperties:function(e,t){return a(this,e,t),this},getProto:function(){return Object.getPrototypeOf(this)},getSuper:function(){return Object.getPrototypeOf(this.constructor.prototype)}},c={isGeneration:function(e){o(e,"function");var t=this;return t.prototype.isPrototypeOf(e.prototype)},isCreation:function(e){var t=this;return e instanceof t},generate:function(e){o(e,"function");var t=this;return a(e,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(t.prototype)}),a(e,{configurable:!1,enumerable:!1,writable:!1},c),a(e.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:e,generator:e}),e},definePrototype:function(e,t){return a(this.prototype,e,t),this}};a(s,{configurable:!1,enumerable:!1,writable:!1},{prototype:s.prototype}),a(s.prototype,{configurable:!1,enumerable:!1,writable:!1},u),a(s,{configurable:!1,enumerable:!1,writable:!1},c),a(s,{configurable:!1,enumerable:!1,writable:!1},{isGenerator:function(e){return this.isGeneration(e)},toGenerator:function(e,t){return console.warn("Generator.toGenerator is depreciated please use Generator.generateFrom"),this.generateFrom(e,t)},generateFrom:function(e,t){return o(e,"function"),o(t,"function"),a(t,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(e.prototype)}),a(t,{configurable:!1,enumerable:!1,writable:!1},c),a(t.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:t,generator:t}),a(t.prototype,{configurable:!1,enumerable:!1,writable:!1},u),t}}),Object.freeze(s),Object.freeze(s.prototype),r=function(){return s}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}()},function(e,t){function n(e){if(e){if("insert"===e.type)return e.path;if("opperator"===e.type||"transform"===e.type)for(var t=0;t<e.arguments.length;t++){var r=n(e.arguments[t]);if("insert"===r.type)return r.argument}}return""}t.pathResolver=function(e,t){for(e=e.slice(),t=t.slice();e.length&&".."===t[0];)t.shift(),e.pop();return e.concat(t)},t.isEntity=function(e){return!0},t.pathSpliter=function(e){var t;if(e instanceof Array)t=e;else{if("string"!=typeof e)throw"bad arrgument: expected String | Array<String>.";t=e.match(/[\/]|[.][.]/)?e.split("/"):e.split("."),t[0]||t[1]||(t=["."]);var n=t.pop().split("@");n[0]&&t.push(n[0]),n[1]&&t.push("@"+n[1])}return t},t.findPath=n},function(e,t,n){t.Compiler=n(58),t.Token=n(6)},function(e,t){e.exports={name:"bars",version:"0.4.1",description:"Bars is a light weight high performance templating system.Bars emits DOM rather than DOM-strings, this means the DOM state is preserved even if data updates happens.",main:"index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"git+https://github.com/Mike96Angelo/Bars.git"},keywords:["bars","template","templating","html"],author:"Michaelangelo Jong",license:"MIT",bugs:{url:"https://github.com/Mike96Angelo/Bars/issues"},homepage:"https://github.com/Mike96Angelo/Bars#readme",dependencies:{compileit:"^1.0.0","generate-js":"^3.1.2"},devDependencies:{browserify:"^11.0.1",colors:"^1.1.2",gulp:"^3.9.1","gulp-minify":"0.0.14",stringify:"^5.1.0","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"}}},function(e,t,n){var r=n(12),o=r.generate(function(e){var t=this;if("object"!=typeof e.cta)throw new Error("`options.cta` is required.");e.event=e.event||"ready",e.action=e.action||"show",e.visibility=e.visibility||{},e.data=e.data||{},e.wait=parseInt(e.wait)||0,e.scroll=e.scroll||0,e.offset=parseInt(e.offset||e.cta.offset)||(new Date).getTimezoneOffset(),"undefined"==typeof e.onceler&&(e.onceler=["ready","exit","scroll"].indexOf(e.event)!==-1),t.defineProperties(e),t.cta.isVisibleForPage(t.visibility.show,t.visibility.hide)&&t.bind()});o.definePrototype({bind:function(){var e=this,t=o.EVENTS[e.event];"function"==typeof t?t.apply(e):e.target?e.bindBasicEvent():e.bindCTAEvent()},bindCTAEvent:function(){var e=this;e.cta.on(e.event,function(){e.trigger()})},bindBasicEvent:function(){var e=this;$(e.target);$(document).on(e.event,e.target,function(){return e.trigger(),!1})},trigger:function(e){function t(){"function"==typeof n.action?n.action(n.data):n.cta[n.action](n.data)}var n=this;n.onceler&&n.triggered||(n.defineProperties({triggered:!0}),setTimeout(e||t,n.wait))}}),o.EVENTS={},o.registerEvent=function(e,t){this.EVENTS[e]=t},e.exports=o},function(e,t,n){var r;!function(){function o(e,t){if(typeof e!==t)throw new TypeError("Expected '"+t+"' but instead found '"+typeof e+"'")}function i(e){var t,n;return!!(e&&"object"==typeof e&&(t=Object.getOwnPropertyNames(e).sort(),n=t.length,1===n&&("get"===t[0]&&"function"==typeof e.get||"set"===t[0]&&"function"==typeof e.set)||2===n&&"get"===t[0]&&"function"==typeof e.get&&"set"===t[1]&&"function"==typeof e.set))}function a(e,t,n){var r,o,a,s={},u=n||t,c=n&&t;for(n=u&&"object"==typeof u?u:{},t=c&&"object"==typeof c?c:{},o=Object.getOwnPropertyNames(n),a=o.length,r=0;r<a;r++)i(n[o[r]])?s[o[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,get:n[o[r]].get,set:n[o[r]].set}:s[o[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,writable:!!t.writable,value:n[o[r]]};return Object.defineProperties(e,s),e}function s(){}var u={defineProperties:function(e,t){return a(this,e,t),this},getProto:function(){return Object.getPrototypeOf(this)},getSuper:function(){return Object.getPrototypeOf(this.constructor.prototype)}},c={isGeneration:function(e){o(e,"function");var t=this;return t.prototype.isPrototypeOf(e.prototype)},isCreation:function(e){var t=this;return e instanceof t},generate:function(e){o(e,"function");var t=this;return a(e,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(t.prototype)}),a(e,{configurable:!1,enumerable:!1,writable:!1},c),a(e.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:e,generator:e}),e},definePrototype:function(e,t){return a(this.prototype,e,t),this}};a(s,{configurable:!1,enumerable:!1,writable:!1},{prototype:s.prototype}),a(s.prototype,{configurable:!1,enumerable:!1,writable:!1},u),a(s,{configurable:!1,enumerable:!1,writable:!1},c),a(s,{configurable:!1,enumerable:!1,writable:!1},{isGenerator:function(e){return this.isGeneration(e)},toGenerator:function(e,t){return console.warn("Generator.toGenerator is depreciated please use Generator.generateFrom"),this.generateFrom(e,t)},generateFrom:function(e,t){return o(e,"function"),o(t,"function"),a(t,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(e.prototype)}),a(t,{configurable:!1,enumerable:!1,writable:!1},c),a(t.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:t,generator:t}),a(t.prototype,{configurable:!1,enumerable:!1,writable:!1},u),t}}),Object.freeze(s),Object.freeze(s.prototype),r=function(){return s}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}()},function(e,t,n){e.exports=n(51)},function(e,t,n){var r=n(3),o=n(52),i=n(1),a=n(16),s=n(56),u=n(10),c=r.generate(function(){var e=this;e.defineProperties({blocks:new a,partials:{},transforms:new s})});c.definePrototype({version:u.version,build:function(e){var t=this,n=e;return Array.isArray(e)&&(n=new i.tokens.program,n.fromArray(e)),new o(t,n.fragment)},registerBlock:function(e,t){var n=this;n.blocks[e]=t},registerPartial:function(e,t){var n=this;n.partials[e]=n.compile(t)},registerTransform:function(e,t){var n=this;n.transforms[e]=t}}),e.exports=c},function(e,t,n){var r=n(14),o=n(18);r.definePrototype({compile:function(e,t,n,r){var o=this;return o.build(o.parse(e,t,n,r))},parse:function(e,t,n,r){return o(e,t,n,r)}}),e.exports=r},function(e,t,n){var r=n(3),o=r.generate(function(){});o.definePrototype({if:function(e){return e},with:function(e){var t=this;if(e&&"object"==typeof e){if(!t.nodes[0]){var n=t.createFragment(),r=t.path.slice();n.context.path=r}return t.nodes[0].context.data=e,!0}return!1},each:function(e){var t,n=this;if(e&&"object"==typeof e){var r=Object.keys(e);if(r.length){for(t=n.nodes.length-1;t>=r.length;t--)n.nodes[t].remove();for(t=n.nodes.length;t<r.length;t++)n.createFragment(r[t]);for(t=0;t<r.length;t++){var o=n.path.slice();o.push(r[t]),n.nodes[t].context.path=o,n.nodes[t].context.data=e[r[t]]}return!0}}return!1}}),e.exports=o},function(e,t,n){function r(e,t,n,r){n=n||"DOM",r=r||{};var o=new a.tokens.program,i=new a.tokens.fragment;return i.nodesUpdate=1,o.mode=n,o.fragment=i,i.nodes=u.compile(e,t,n,r),o}var o=n(9),i=n(35),a=n(1),s={TEXT:[i.parseText,i.parseBarsMarkup],BARS:[i.parseBarsComment,i.parseBarsBlock,i.parseBarsPartial,i.parseBarsInsert],DOM:[i.parseText,i.parseHTMLComment,i.parseHTMLTag,i.parseBarsMarkup],ATTR:[i.parseHTMLTagEnd,i.parseWhitspace,i.parseHTMLAttr,i.parseBarsMarkup],VALUE:[i.parseHTMLAttrEnd,i.parseText,i.parseBarsMarkup],LOGIC:[i.parseBarsMarkupEnd,i.parseExpressionTransform,i.parseExpressionValue,i.parseExpressionLiteral,i.parseExpressionOpperator,i.parseWhitspace],"LOGIC-ARGS":[i.parseExpressionTransformEnd,i.parseExpressionTransform,i.parseExpressionValue,i.parseExpressionLiteral,i.parseExpressionOpperator,i.parseWhitspace]},u=new o.Compiler(s,{modeFormater:function(e){return e.green},charFormater:function(e){return e.green.underline},funcFormater:function(e){return e.red},typeFormater:function(e){return e.red},sourceFormater:function(e){return("`"+e+"`").green.underline}});e.exports=r},function(e,t,n){e.exports=n(17)},function(e,t,n){function r(e,t,n,o,u,c){var l,f,d,p,h,g=t.index+2,m=t.length,_=o.markup.mode;if(47===t.codePointAt(g))d=!0,o.markup.closeParseScope=!0;else{if(!(35===t.codePointAt(g)||u.token&&u.token.alternateIsBlock)){if(101===t.codePointAt(g)&&108===t.codePointAt(++g)&&115===t.codePointAt(++g)&&101===t.codePointAt(++g)){if(p=!0,s.isWhitespace(t.codePointAt(g+1))?(g+=2,h=!0):125===t.codePointAt(++g)&&125===t.codePointAt(++g)&&g++,l=new i(t),t.index=g,l.close(),!i.isCreation(u.token)||u.token.elsed)throw t.makeError(l.range[0],l.range[1],"Unexpected Token: "+JSON.stringify(l.source(t))+".");return u.token.elsed=!0,u.token.alternateIsBlock=h,o.markup.closeParseScope=!0,u.close(),c.close(),!0}return null}f=!0}if(u.token&&u.token.alternateIsBlock?g-=2:g++,l=new i(t),!s.isHTMLIdentifierStart(t.codePointAt(g)))throw t.makeError(g,g+1,"Unexpected Token: Expected <[A-Za-z]> but found "+JSON.stringify(t.charAt(g))+".");for(;g<m&&(ch=t.codePointAt(g),s.isHTMLIdentifier(ch));g++)l.name+=t.charAt(g);if(d){if(125!==t.codePointAt(g)||125!==t.codePointAt(++g))throw t.makeError(g,g+1,"Unexpected Token: Expected "+JSON.stringify("}}")+" but found "+JSON.stringify(t.charAt(g))+".");if(g++,t.index=g,l.close(),!i.isCreation(u.token))throw t.makeError(l.range[0],l.range[1],"Unexpected Closing Block: "+JSON.stringify(l.source(t))+".");if(u.token.name!==l.name)throw t.makeError(l.range[0],l.range[1],"Mismatch Closing Block: Expected "+JSON.stringify("{{/"+u.token.name+"}}")+" but found "+JSON.stringify(l.source(t))+".");return u.close(),c.close(),!0}s.isWhitespace(t.codePointAt(g))&&g++,t.index=g;var v=[];if(u.push(l),c("LOGIC",v,o),l.expression=v[0],v.length>1)throw t.makeError(v[1].range[0],v[1].range[1],"Unexpected Token: "+JSON.stringify(v[1].source(t))+".");if(v=null,!l.closed)throw t.makeError(t.index,t.index+1,"Unclosed Block: Expected "+JSON.stringify("}}")+" but found "+JSON.stringify(t.charAt(t.index))+".");if(!l.expression)throw t.makeError(t.index-2,t.index-1,"Missing <expression>.");if(l.consequent=new a(t),delete l.closed,u.push(l),c(_,l.consequent.nodes,o),g=t.index,l.consequent.close(),t.index=g,l.elsed){if(l.alternateIsBlock)return delete l.closed,u.push(l),o.markup={mode:_},l.alternate=r(e,t,[],o,u,c),delete o.markup,u.close(),l;l.alternate=new a(t),delete l.closed,u.push(l),c(_,l.alternate.nodes,o),g=t.index,l.alternate.close()}if(!l.closed)throw t.makeError(l.range[0],l.range[0]+l.name.length+6+l.expression.length,"Unclosed Block: Expected "+JSON.stringify("{{/"+l.name+"}}")+" to fallow "+JSON.stringify("{{#"+l.name+" <expression>}}")+".");return c.close(),l}var o=n(1),i=o.tokens.block,a=o.tokens.fragment,s=n(4);e.exports=r},function(e,t){function n(e,t,n,r,o,i){var a=t.index+2,s=t.length;if(33===t.codePointAt(a)){if(45===t.codePointAt(++a)&&45===t.codePointAt(++a)){for(a++;a<s;a++)if(45===t.codePointAt(a)&&45===t.codePointAt(a+1)&&125===t.codePointAt(a+2)&&125===t.codePointAt(a+3))return a+=4,t.index=a,i.close(),r.keepComments,!0;throw t.makeError('Unclosed Comment: Expected "--}}" to fallow "{{!--".',5)}for(a++;a<s;a++)if(125===t.codePointAt(a)&&125===t.codePointAt(a+1))return a+=2,t.index=a,i.close(),r.keepComments,!0;throw t.makeError(t.index,t.index+3,'Unclosed Comment: Expected "}}" to fallow "{{!".')}return null}e.exports=n},function(e,t,n){function r(e,t,n,r,i,a){var s=t.index+2,u=(t.length,new o(t)),c=[];if(i.push(u),t.index=s,a("LOGIC",c,r),c.length>1)throw t.index=c[1].range[0],t.makeError(c[1].range[0],c[1].range[1],"Unexpected Token: "+JSON.stringify(c[1].source(t))+".");if(u.expression=c[0],c=null,!u.closed)throw t.makeError(t.index,t.index+1,"Unclosed Block: Expected "+JSON.stringify("}}")+" but found "+JSON.stringify(t.charAt(t.index))+".");if(!u.expression)throw t.makeError(t.index-2,t.index-1,"Missing <expression>.");return a.close(),u}var o=n(1).tokens.insert;e.exports=r},function(e,t,n){function r(e,t,n,r,i,a){return 125===t.codePointAt(t.index)&&125===t.codePointAt(t.index+1)&&(o.tokens.insert.isCreation(i.token)||o.tokens.block.isCreation(i.token)||o.tokens.partial.isCreation(i.token))?(t.index+=2,i.close(),a.close(),!0):null}var o=n(1);e.exports=r},function(e,t){function n(e,t,n,r,o,i){var a=t.index;t.length;if(123===t.codePointAt(a)&&123===t.codePointAt(++a)){if(r.markup={},r.markup.mode=e,i("BARS",n,r),t.index>a)return r.markup&&r.markup.closeParseScope&&i.close(),delete r.markup,o.token&&o.token.updates(),!0;delete r.markup}return null}e.exports=n},function(e,t,n){function r(e,t,n,r,a,s){var u,c=t.index+2,l=t.length;if(62===t.codePointAt(c)){if(u=new o(t),c++,!i.isHTMLIdentifierStart(t.codePointAt(c)))throw t.makeError(c,c+1,"Unexpected Token: Expected <[A-Za-z]> but found "+JSON.stringify(t.charAt(c))+".");for(;c<l&&(ch=t.codePointAt(c),i.isHTMLIdentifier(ch));c++)u.name+=t.charAt(c);t.index=c;var f=[];if(a.push(u),s("LOGIC",f,r),f.length>1)throw t.makeError(f[1].range[0],f[1].range[1],"Unexpected Token: "+JSON.stringify(f[1].source(t))+".");if(u.expression=f[0]||null,f=null,!u.closed)throw t.makeError(c,c+1,"Unclosed Block: Expected "+JSON.stringify("}}")+" but found "+JSON.stringify(t.charAt(t.index))+".");return s.close(),u}return null}var o=n(1).tokens.partial,i=n(4);e.exports=r},function(e,t,n){function r(e,t,n,r,o,i){var a,s,u=t.index,f=t.length;if(39!==t.codePointAt(u))return null;for(u++,s=new c(t),s.value="";u<f;u++){if(a=t.codePointAt(u),10===a)return t.index=u,null;if(39===a&&92!==t.codePointAt(u-1)){u++;break}s.value+=t.charAt(u)}return u>t.index?(t.index=u,s.close(),l.isCreation(o.token)&&(o.close(),i.close()),s):null}function o(e,t,n,r,o,i){var a,s,u=t.index,f=t.length,d=t.codePointAt(u),p=t.codePointAt(u+1);if(45===d&&48<=p&&p<=57||48<=d&&d<=57){for(u++,number=new c(t);u<f;u++)if(d=t.codePointAt(u),!(48<=d&&d<=57))if(69===d||101===d){if(u++,d=t.codePointAt(u),p=t.codePointAt(u+1),s||!((43===d||45===d)&&48<=p&&p<=57||48<=d&&d<=57))throw t.index=u-1,t.makeError("Unexpected Token: "+JSON.stringify(t.charAt(u-1))+".");s=!0}else{if(46!==d)break;if(u++,d=t.codePointAt(u),s||a||!(48<=d&&d<=57))throw t.index=u-1,t.makeError('Unexpected Token: ".".');a=!0}return t.index=u,number.close(),number.value=Number(number.source(t)),l.isCreation(o.token)&&(o.close(),i.close()),number}return null}function i(e,t,n,r,o,i){var a,s=t.index;if(116===t.codePointAt(s)&&114===t.codePointAt(++s)&&117===t.codePointAt(++s)&&101===t.codePointAt(++s))a=!0;else{if(102!==t.codePointAt(s)||97!==t.codePointAt(++s)||108!==t.codePointAt(++s)||115!==t.codePointAt(++s)||101!==t.codePointAt(++s))return null;a=!1}var u=new c(t);return s++,t.index=s,u.close(),u.value=a,l.isCreation(o.token)&&(o.close(),i.close()),a}function a(e,t,n,r,o,i){var a,s=t.index;return 110!==t.codePointAt(s)||117!==t.codePointAt(++s)||108!==t.codePointAt(++s)||108!==t.codePointAt(++s)?null:(s++,a=new c(t),t.index=s,a.close(),a.value=null,l.isCreation(o.token)&&(o.close(),i.close()),a)}function s(e,t,n,s,u,c){return r(e,t,n,s,u,c)||o(e,t,n,s,u,c)||i(e,t,n,s,u,c)||a(e,t,n,s,u,c)}var u=n(1),c=u.tokens.literal,l=u.tokens.opperator;e.exports=s},function(e,t,n){function r(e,t,n,r,o,l){var f,d,p,h,g,m=t.index,_=t.length,v=m,y=t.codePointAt(m);for(f=m;m<_&&(y=t.codePointAt(m),c.isWhitespace(y));m++)if(r.whitepaceString&&10===y)return t.index=m,null;if(m===f&&(g=!0),y=t.codePointAt(m),d=t.codePointAt(m+1),p=t.codePointAt(m+2),61===y&&61===d&&61===p||33===y&&61===d&&61===p?(t.index=m,h=new s(t),h.opperator=t.slice(m,m+3),h.binary=!0,m+=2):61===y&&61===d||33===y&&61===d||60===y&&61===d||62===y&&61===d||38===y&&38===d||124===y&&124===d?(t.index=m,h=new s(t),h.opperator=t.slice(m,m+2),h.binary=!0,m++):43===y||45===y||42===y||47===y||37===y||60===y||62===y?(t.index=m,h=new s(t),h.opperator=t.charAt(m),h.binary=!0):33===y&&(t.index=m,h=new s(t),h.opperator=t.charAt(m),h.unary=!0,m++),!h||!h.opperator)return g?null:(t.index=m,!0);if(h.binary){if(g)throw t.makeError(v,v+h.opperator.length,"Unexpected Token: "+JSON.stringify(h.opperator)+" missing whitespace before opperator.");if(h.arguments[0]=n.pop(),!h.arguments[0])throw t.makeError(m,m+h.opperator.length,"Missing left-hand <arg>.");if(!(i.isCreation(h.arguments[0])||a.isCreation(h.arguments[0])||s.isCreation(h.arguments[0])||u.isCreation(h.arguments[0])))throw t.makeError(h.arguments[0].range[0],h.arguments[0].range[1],"Unexpected left-hand <arg>: "+JSON.stringify(h.arguments[0].source(t))+".");for(h.range[0]=h.arguments[0].range[0],h.loc.start=h.arguments[0].loc.start,m++,f=m,y=t.codePointAt(m);m<_&&(y=t.codePointAt(m),c.isWhitespace(y));m++)if(r.whitepaceString&&10===y)return t.index=m,null;if(m===f)throw t.makeError(m,m+1,"Unexpected Token: Expected <whitespace> but found "+JSON.stringify(t.charAt(m))+".")}var b=[];if(t.index=m,o.push(h),l("LOGIC",b,r),h.arguments[1]=b[0],b.length>1)throw t.makeError(b[1].range[0],b[1].range[1],"Unexpected Token: "+JSON.stringify(b[1].source(t))+".");if(b=null,!h.closed||!h.arguments[1])throw t.index=m,t.makeError(m,m+h.opperator.length,"Missing right-hand <arg>.");if(!(i.isCreation(h.arguments[1])||a.isCreation(h.arguments[1])||s.isCreation(h.arguments[1])||u.isCreation(h.arguments[1])))throw t.makeError(h.arguments[1].range[0],h.arguments[1].range[1],"Unexpected right-hand <arg>: "+JSON.stringify(h.arguments[1].source(t))+".");return h.unary&&s.isCreation(o.token)&&(o.close(),l.close()),h}var o=n(1),i=o.tokens.value,a=o.tokens.literal,s=o.tokens.opperator,u=o.tokens.transform,c=n(4);e.exports=r},function(e,t,n){function r(e,t,n,r,i,a){return 41===t.codePointAt(t.index)&&o.tokens.transform.isCreation(i.token)?(t.index++,i.close(),a.close(),!0):44===t.codePointAt(t.index)&&o.tokens.transform.isCreation(i.token)?(t.index++,i.token.nextArg=!0,a.close(),!0):null}var o=n(1);e.exports=r},function(e,t,n){function r(e,t,n,r,o,u){var c,l=t.index,f=t.length,d=t.codePointAt(l);if(64!==d)return null;if(l++,!s.isHTMLIdentifierStart(t.codePointAt(l)))return null;for(c=new i(t);l<f&&(d=t.codePointAt(l),s.isHTMLIdentifier(d));l++)c.name+=t.charAt(l);if(d=t.codePointAt(l),40!==d)return null;for(l++,t.index=l,o.push(c);t.left;){var p=[];if(u("LOGIC-ARGS",p,r),p.length>1)throw t.index=p[1].range[0],t.makeError(p[1].range[0],p[1].range[1],"Unexpected Token: "+JSON.stringify(p[1].source(t))+".");if(c.arguments.push(p[0]),c.nextArg&&(delete c.nextArg,delete c.closed),c.closed)break}return a.isCreation(o.token)&&(o.close(),u.close()),c}var o=n(1),i=o.tokens.transform,a=o.tokens.opperator,s=n(4);e.exports=r},function(e,t,n){function r(e,t,n,r,o,u){var c,l,f,d,p,h,g=t.index,m=t.length,_=t.codePointAt(g),v=126===_,y=64===_;if(!s.isHTMLIdentifierStart(_)&&!v&&!y&&46!==_)return null;l=new i(t);var b=[],x="";for((v||y)&&(b.push(t.charAt(g)),g++);g<m;g++)if(_=t.codePointAt(g),c=t.codePointAt(g+1),s.isHTMLIdentifier(_)){if(!p&&(d||h))throw t.makeError(g,g+1,"Unexpected Token: "+JSON.stringify(t.charAt(g))+".");if(p&&!s.isHTMLIdentifierStart(_))throw t.makeError(g,g+1,"Unexpected Token: Expected <[A-Za-z]> but found "+JSON.stringify(t.charAt(g))+".");x+=t.charAt(g),v=!0,p=!1}else if(v&&y||!(v||h||d)||47!==_)if(v||46!==_||46!==c){if(y||46!==_)break;if(1===f||p)throw t.makeError(g,g+1,"Unexpected Token: "+JSON.stringify(t.charAt(g))+".");v&&(f=0,p=!0,x&&(b.push(x),x="")),d=!0}else{if(d||0===f)throw t.makeError(g,g+1,"Unexpected Token: "+JSON.stringify(t.charAt(g))+".");g++,b.push(".."),f=1,h=!0,p=!1}else{if(0===f||p)throw t.makeError(g,g+1,"Unexpected Token: "+JSON.stringify(t.charAt(g))+".");x&&(b.push(x),x=""),f=1,h=!1,p=!0}return x&&(b.push(x),x=""),g>t.index?(t.index=g,l.close(),l.path=b,a.isCreation(o.token)&&(o.close(),u.close()),l):null}var o=n(1),i=o.tokens.value,a=o.tokens.opperator,s=n(4);e.exports=r},function(e,t){function n(e,t,n,r,o,i){return 34===t.codePointAt(t.index)?(t.index++,o.close(),i.close(),!0):null}e.exports=n},function(e,t,n){function r(e,t,n,r,o,s){var u,c=t.index,l=t.length;if(!a.isHTMLIdentifierStart(t.codePointAt(c)))return null;for(u=new i(t);c<l&&a.isHTMLIdentifier(t.codePointAt(c));c++)u.name+=t.charAt(c);if(u.name){if(61===t.codePointAt(c)){if(c++,34!==t.codePointAt(c))throw t.makeError(c,c+1,'Unexpected Token: Expected """ but found '+JSON.stringify(t.charAt(c)));c++,t.index=c,o.push(u),r.whitepaceString=!0,s("VALUE",u.nodes,r),delete r.whitepaceString}else t.index=c,u.close();if(!u.closed)throw t.makeError(u.range[0]+u.name.length+1,u.range[0]+u.name.length+2,'Unclosed String: Expected """ to fallow """');return o.token&&u.nodesUpdate&&o.token.updates("attr"),u}return null}var o=n(1),i=o.tokens.attr,a=n(4);e.exports=r},function(e,t){function n(e,t,n,r,o,i){var a=t.index,s=t.length;if(60===t.codePointAt(a)&&33===t.codePointAt(++a)&&45===t.codePointAt(++a)&&45===t.codePointAt(++a)){for(a++;a<s;a++)if(45===t.codePointAt(a)&&45===t.codePointAt(a+1)&&62===t.codePointAt(a+2))return a+=3,t.index=a,!0;throw t.makeError(t.index,t.index+4,'Unclosed Comment: Expected "-->" to fallow "<!--".')}return null}e.exports=n},function(e,t){function n(e,t,n,r,o,i){var a=t.codePointAt(t.index);if(62===a)return t.index++,o.close(),i.close(),!0;if(47===a&&62===t.codePointAt(t.index+1)){t.index+=2;var s=o.close();return s.selfClosed=!0,i.close(),!0}return null}e.exports=n},function(e,t,n){function r(e,t,n,r,a,s){var u,c,l=t.index,f=t.length;if(60===t.codePointAt(l)){if(47===t.codePointAt(l+1)&&(c=!0,l++),u=new o(t),l++,!i.isHTMLIdentifierStart(t.codePointAt(l)))throw t.makeError(l,l+1,"Unexpected Token: Expected <[A-Za-z]> but found "+JSON.stringify(t.charAt(l))+".");for(;l<f&&(ch=t.codePointAt(l),i.isHTMLIdentifier(ch));l++)u.name+=t.charAt(l);if(t.index=l,c){if(62!==ch)throw t.makeError(l,l+1,"Unexpected Token: Expected "+JSON.stringify(">")+" but found "+JSON.stringify(t.charAt(l))+".");if(l++,t.index=l,u.close(),!o.isCreation(a.token))throw t.makeError(u.range[0],u.range[1],"Unexpected Closing Tag: "+JSON.stringify(u.source(t))+".");if(a.token.name!==u.name)throw t.makeError(u.range[0],u.range[1],"Mismatch Closing Tag: Expected "+JSON.stringify("</"+a.token.name+">")+" but found "+JSON.stringify(u.source(t))+".");return a.close(),s.close(),!0}if(a.push(u),s("ATTR",u.attrs,r),!u.closed)throw t.makeError(l,l+1,"Unclosed Tag: Expected "+JSON.stringify(">")+" but found "+JSON.stringify(t.charAt(t.index))+".");if(i.isSelfClosing(u.name)&&(u.selfClosing=!0),u.selfClosing||u.selfClosed)return u;if(delete u.closed,"pre"!==u.name&&"style"!==u.name&&"script"!==u.name||(r.minify=!1),a.push(u),"style"===u.name||"script"===u.name?(r.textExitTag=u.name,s("TEXT",u.nodes,r),delete r.textExitTag):s(e,u.nodes,r),!u.closed)throw t.makeError(u.range[0],u.range[1],"Unclosed Tag: Expected "+JSON.stringify("</"+u.name+">")+" to fallow "+JSON.stringify(u.source(t))+".");return a.token&&(u.attrsUpdate||u.nodesUpdate)&&a.token.updates(),u}return null}var o=n(1).tokens.tag,i=n(4);e.exports=r},function(e,t,n){t.parseText=n(36),t.parseWhitspace=n(37),t.parseHTMLComment=n(32),t.parseHTMLTag=n(34),t.parseHTMLTagEnd=n(33),t.parseHTMLAttr=n(31),t.parseHTMLAttrEnd=n(30),t.parseBarsMarkup=n(23),t.parseBarsComment=n(20),t.parseBarsInsert=n(21),t.parseBarsPartial=n(24),t.parseBarsBlock=n(19),t.parseBarsMarkupEnd=n(22),t.parseExpressionValue=n(29),t.parseExpressionLiteral=n(25),t.parseExpressionOpperator=n(26),t.parseExpressionTransform=n(28),t.parseExpressionTransformEnd=n(27)},function(e,t,n){function r(e,t,n,r,a,s){var u,c=t.index,l=!1,f="",d="";if("DOM"===e)for(;c<t.length;c++){if(ch=t.codePointAt(c),60===ch||123===ch&&123===t.codePointAt(c+1)){d+=f;break}38!==ch?l&&59===ch?(f+=t.charAt(c),d+=i.getHTMLUnEscape(f),l=!1,f=""):l&&i.isHTMLEntity(ch)?f+=t.charAt(c):(d+=f,l=!1,f="",d+=t.charAt(c)):(l=!0,f=t.charAt(c))}else if(r.whitepaceString)for(;c<t.length;c++){if(ch=t.codePointAt(c),10===ch)return t.index=c,null;if(34===ch&&92!==t.codePointAt(c-1))break;if(123===ch&&123===t.codePointAt(c+1))break}else for(;c<t.length&&(123!==t.codePointAt(c)||123!==t.codePointAt(c+1));c++){if("script"===r.textExitTag&&60===t.codePointAt(c)&&47===t.codePointAt(c+1)&&115===t.codePointAt(c+2)&&99===t.codePointAt(c+3)&&114===t.codePointAt(c+4)&&105===t.codePointAt(c+5)&&112===t.codePointAt(c+6)&&116===t.codePointAt(c+7)&&62===t.codePointAt(c+8)){
u=9;break}if("style"===r.textExitTag&&60===t.codePointAt(c)&&47===t.codePointAt(c+1)&&115===t.codePointAt(c+2)&&116===t.codePointAt(c+3)&&121===t.codePointAt(c+4)&&108===t.codePointAt(c+5)&&101===t.codePointAt(c+6)&&62===t.codePointAt(c+7)){u=8;break}}if(t.index<c){var p=new o(t);if(t.index=c,p.close(),r.minify){if(p.value=i.minifyHTMLText(d||p.source(t)),/^\s*$/.test(p.value))return!0}else p.value=d||p.source(t);return r.textExitTag&&u&&(t.index+=u,a.close(),s.close()),p}return null}var o=n(1).tokens.text,i=n(4);e.exports=r},function(e,t,n){function r(e,t,n,r,i,a){for(var s=t.index,u=t.length,c=0;s<u&&o.isWhitespace(t.codePointAt(s))&&(!r.whitepaceString||10!==t.codePointAt(s));s++)c++;return c?(t.index=s,!0):null}var o=n(4);e.exports=r},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.nodes=[],t.nodesUpdate=0});o.definePrototype({enumerable:!0},{type:"attr"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.nodes,e.nodesUpdate]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,nodes:e.nodes,nodesUpdate:e.nodesUpdate}},_fromArray:function(e){var t=this;t.name=e[1],t.nodes=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.nodesUpdate=e[3]},toString:function(){var e=this,t=" ";t+=e.name+(e.nodes.length?'="':"");for(var n=0;n<e.nodes.length;n++)e.nodes[n].indentLevel="",t+=e.nodes[n].toString();return t+=e.nodes.length?'"':""},updates:function(){var e=this;e.nodesUpdate=1}}),r.tokens.attr=o},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.expression=null,t.map=null,t.consequent=null,t.alternate=null});o.definePrototype({enumerable:!0},{type:"block"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.expression,e.map,e.consequent,e.alternate]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,expression:e.expression,map:e.map,consequent:e.consequent,alternate:e.alternate}},_fromArray:function(e){var t=this;t.name=e[1];var n=new r.tokens[e[2][0]];n.fromArray(e[2]),t.expression=n,t.map=e[3];var o=new r.tokens.fragment;if(o.fromArray(e[4]),t.consequent=o,e[5]){var i=new r.tokens[e[5][0]];i.fromArray(e[5]),t.alternate=i}},toString:function(){var e=this,t="";if(e.fromElse||(t+=e.indentLevel+"{{#"),t+=e.name+" ",t+=e.expression.toString(),t+=e.map?e.map.toString():"",t+="}}",e.consequent.indentLevel=e.indentLevel?e.indentLevel+"  ":"",t+=e.consequent.toString(),e.alternate){if(e.alternate.indentLevel=e.indentLevel,"block"===e.alternate.type)return e.alternate.fromElse=!0,t+=e.indentLevel+"{{else "+e.alternate.toString();e.alternate.indentLevel+=e.indentLevel?e.indentLevel+"  ":"",t+=e.indentLevel+"{{else}}",t+=e.alternate.toString()}return t+=e.indentLevel+"{{/"+e.name+"}}"},updates:function(){var e=this;e.elsed&&e.alternate?e.alternate.nodesUpdate=1:e.consequent&&(e.consequent.nodesUpdate=1)}}),r.tokens.block=o},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.nodes=[],t.nodesUpdate=0});o.definePrototype({enumerable:!0},{type:"fragment"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.nodes,e.nodesUpdate]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,nodes:e.nodes,nodesUpdate:e.nodesUpdate}},_fromArray:function(e){var t=this;t.nodes=e[1].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.nodesUpdate=e[2]},toString:function(){for(var e=this,t="",n=0;n<e.nodes.length;n++)e.nodes[n].indentLevel=e.indentLevel,t+=e.nodes[n].toString();return t},updates:function(){var e=this;e.nodesUpdate=1}}),r.tokens.fragment=o},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.expression=null});o.definePrototype({enumerable:!0},{type:"insert"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.expression]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,expression:e.expression}},_fromArray:function(e){var t=this,n=new r.tokens[e[1][0]];n.fromArray(e[1]),t.expression=n},toString:function(){var e=this,t="{{ ";return t+=e.expression.toString(),t+=" }}"}}),r.tokens.insert=o},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.value=""});o.definePrototype({enumerable:!0},{type:"literal"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.value]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,value:e.value}},_fromArray:function(e){var t=this;t.value=e[1]},toString:function(){var e=this,t="";return t+=e.value}}),r.tokens.literal=o},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.opperator=0,t.arguments=[]});o.definePrototype({enumerable:!0},{type:"opperator"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.opperator,e.arguments]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,opperator:e.opperator,arguments:e.arguments}},_fromArray:function(e){var t=this;t.opperator=e[1],t.arguments=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t})},toString:function(){var e=this,t="";return 1===e.arguments.length?t+=e.opperator+e.arguments[0].toString():2===e.arguments.length&&(t+=e.arguments[0].toString(),t+=" "+e.opperator+" ",t+=e.arguments[1].toString()),t}}),r.tokens.opperator=o},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.expression=null,t.map=null});o.definePrototype({enumerable:!0},{type:"partial"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.expression,e.map]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,expression:e.expression,map:e.map}},_fromArray:function(e){var t=this;if(t.name=e[1],e[2]){var n=new r.tokens[e[2][0]];n.fromArray(e[2]),t.expression=n}t.map=e[3]},toString:function(){var e=this,t=e.indentLevel+"{{>"+e.name;return t+=e.expression?" "+e.expression.toString():"",t+="}}"}}),r.tokens.partial=o},function(e,t,n){var r=n(2),o=n(10),i=r.generate(function(e){var t=this;e&&r.call(t,e),t.version=o.version,t.mode="",t.fragment=null});i.definePrototype({enumerable:!0},{type:"program"}),i.definePrototype({writable:!0},{indentLevel:"\n"}),i.definePrototype({TYPE_ID:r.tokens.push(i)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.version,e.mode,e.fragment]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,version:e.version,mode:e.mode,fragment:e.fragment}},_fromArray:function(e){var t=this;t.version=e[1],t.mode=e[2];var n=new r.tokens.fragment;n.fromArray(e[3]),t.fragment=n},toString:function(){var e=this;return e.fragment.indentLevel=e.indentLevel,e.fragment.toString().trim()+"\n"}}),r.tokens.program=i},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.attrs=[],t.nodes=[],t.attrsUpdate=0,t.nodesUpdate=0});o.definePrototype({enumerable:!0},{type:"tag"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.attrs,e.attrsUpdate,e.nodes,e.nodesUpdate]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,attrs:e.attrs,attrsUpdate:e.attrsUpdate,nodes:e.nodes,nodesUpdate:e.nodesUpdate}},_fromArray:function(e){var t=this;t.name=e[1],t.attrs=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.attrsUpdate=e[3],t.nodes=e[4].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.nodesUpdate=e[5]},toString:function(){for(var e=this,t=e.indentLevel+"<"+e.name,n=0;n<e.attrs.length;n++)t+=e.attrs[n].toString();if(e.selfClosed)return t+=(e.attrs.length?" ":"")+"/>";if(t+=">",e.selfClosing)return t;var r="";for(n=0;n<e.nodes.length;n++)e.nodes[n].indentLevel=e.indentLevel?e.indentLevel+"  ":"",r+=e.nodes[n].toString();return t+=r.trim(),t+=e.indentLevel+"</"+e.name+">"},updates:function(e){var t=this;"attr"===e?t.attrsUpdate=1:t.nodesUpdate=1}}),r.tokens.tag=o},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.value=""});o.definePrototype({enumerable:!0},{type:"text"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.value]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,value:e.value}},_fromArray:function(e){var t=this;t.value=e[1]},toString:function(){var e=this,t="";return t+=e.indentLevel+e.value}}),r.tokens.text=o},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.arguments=[]});o.definePrototype({enumerable:!0},{type:"transform"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.arguments]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,arguments:e.arguments}},_fromArray:function(e){var t=this;t.name=e[1],t.arguments=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t})},toString:function(){var e=this,t="@";t+=e.name+"(";for(var n=0;n<e.arguments.length;n++)t+=e.arguments[n].toString()+(n+1<e.arguments.length?", ":"");return t+=")"}}),r.tokens.transform=o},function(e,t,n){var r=n(2),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.path=""});o.definePrototype({enumerable:!0},{type:"value"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.path]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,path:e.path}},_fromArray:function(e){var t=this;t.path=e[1]},toString:function(){var e=this,t="";return t+="~"===e.path[0]||".."===e.path[0]||"."===e.path[0]||"@"===e.path[0]?e.path.join("/"):e.path.join(".")}}),r.tokens.value=o},function(e,t,n){var r=n(3),o=n(54),i=n(8),a=n(53),s=i.pathSpliter,u=i.findPath,c={},l=[],f={fragment:"FRAG",tag:"TAG",text:"TEXT",attr:"ATTR",block:"BLOCK",insert:"TEXT",partial:"PARTIAL"},d=r.generate(function(e,t,n){var r=this;r.defineProperties({fragment:e||null,bars:t,nodes:[],parentTag:{get:r.getParentTag},prevDom:{get:r.getPrevDom},type:n.type,name:n.name,value:n.value,arg:n.expression,conFrag:n.consequent,altFrag:n.alternate})});d.definePrototype({update:function(e){var t=this;t.previousDom=null,t._update(e),t.isDOM&&(t._elementAppendTo(),t.parentTag.previousDom=t),t.previousDom=null},_update:function(){console.warn("_update method not implemented.")},appendChild:function(e){var t=this;t.nodes.push(e),e.parent=t},appendTo:function(e){var t=this;e instanceof Element&&t._elementAppendTo(e),d.isCreation(e)&&e.appendChild(t)},remove:function(){var e=this,t=e.parent.nodes.indexOf(e);t>=0&&e.parent.nodes.splice(t,1),e._elementRemove()},getParentTag:function(){for(var e=this,t=e.parent,n=t;t&&!t.isDOM;)n=t,t=t.parent;return t||n||null},getPrevDom:function(){var e=this;return e.parentTag&&e.parentTag.previousDom||null},_elementAppendTo:function(e){var t=this;if(t.parentTag&&(e=e||t.parentTag.$el||t.parentTag.$parent,e&&!t.$el.parentElement)){var n=t.prevDom;n?e.insertBefore(t.$el,n.$el.nextSibling):e.appendChild(t.$el)}},_elementRemove:function(){var e=this;e.isDOM&&e.$el.parentNode instanceof Element&&e.$el.parentNode.removeChild(e.$el)}}),c.TEXT=d.generate(function(e,t,n){var r=this;d.call(this,e,t,n),r.defineProperties({$el:document.createTextNode(n.value)})}),c.TEXT.definePrototype({isDOM:!0,appendChild:function(e){console.warn("appendChild CANNOT be called on TextNodes.")},_update:function(e){var t=this;t.arg&&(t.$el.textContent=o(t.arg,t.bars.transforms,e))}}),c.TAG=d.generate(function(e,t,n){var r,o=this,i=n.nodes||l,a=n.attrs||l;for(d.call(this,e,t,n),o.defineProperties({$el:document.createElement(n.name),attrs:[]}),r=0;r<i.length;r++){var s=i[r];o.appendChild(new c[f[s.type]](e,t,s))}for(r=0;r<a.length;r++){var u=a[r];o.addAttr(new c[f[u.type]](e,t,u))}}),c.TAG.definePrototype({isDOM:!0,_update:function(e){var t,n=this;for(t=0;t<n.attrs.length;t++)n.attrs[t].update(e);for(t=0;t<n.nodes.length;t++)n.nodes[t].update(e)},addAttr:function(e){var t=this;t.attrs.push(e),e.parent=t}}),c.ATTR=d.generate(function(e,t,n){var r=this,o=n.nodes||l;d.call(this,e,t,n),r.defineProperties({$el:document.createElement("div")});for(var i=0;i<o.length;i++){var a=o[i];r.appendChild(new c[f[a.type]](e,t,a))}}),c.ATTR.definePrototype({isDOM:!0,type:"ATTR",_update:function(e){var t,n=this;for(t=0;t<n.nodes.length;t++)n.nodes[t].update(e)},_elementAppendTo:function(){var e=this,t=e.parentTag.$el;t instanceof Element&&t.setAttribute(e.name,e.$el.textContent)},_elementRemove:function(){var e=this,t=e.parentTag.$el;t instanceof Element&&t.removeAttribute(e.name)}}),c.BLOCK=d.generate(function(e,t,n){var r=this;d.call(this,e,t,n),r.path=s(u(r.arg))}),c.BLOCK.definePrototype({type:"BLOCK",createFragment:function(e){var t=this,n=new c.FRAG(t.fragment,t.bars,t.conFrag);return t.appendChild(n),n},_update:function(e){var t,n,r,i=this;if("function"!=typeof i.bars.blocks[i.name])throw new Error("Block helper not found: "+i.name);if(n=o(i.arg,i.bars.transforms,e),t=i.bars.blocks[i.name].call(i,n)){for(i.nodes.length||i.createFragment(),r=0;r<i.nodes.length;r++)i.nodes[r].update(e);i.alternate&&i.alternate._elementRemove()}else{for(r=0;r<i.nodes.length;r++)i.nodes[r]._elementRemove();!i.alternate&&i.altFrag&&(i.alternate=new c[f[i.altFrag.type]](i.fragment,i.bars,i.altFrag),i.alternate.parent=i),i.alternate&&i.alternate.update(e)}},_elementAppendTo:function(){},_elementRemove:function(){var e,t=this;for(e=0;e<t.nodes.length;e++)t.nodes[e]._elementRemove();t.alternate&&t.alternate._elementRemove()}}),c.PARTIAL=d.generate(function(e,t,n){var r=this;d.call(this,e,t,n),r.path=s(u(r.arg))}),c.PARTIAL.definePrototype({_update:function(e){var t=this;if(!t.partial){var n=t.bars.partials[t.name];if(!n||"object"!=typeof n)throw new Error("Partial not found: "+t.name);t.partial=new c.FRAG(t.fragment,t.bars,n.struct),t.partial.parent=t,(1===t.path.length&&"this"!==t.path[0]&&"."!==t.path[0]&&""!==t.path[0]||t.path.length>1)&&(t.partial.context.path=t.path)}var r=o(t.arg,t.bars.transforms,e);t.partial.context.data=r,t.partial.update(e)},_elementRemove:function(){var e=this;e.partial&&e.partial._elementRemove()}}),c.FRAG=d.generate(function(e,t,n){var r=this,o=n.nodes||l;d.call(this,e,t,n),r.context=new a(null,r,"");for(var i=0;i<o.length;i++){var s=o[i];f[s.type]&&r.appendChild(new c[f[s.type]](r,t,s))}}),c.FRAG.definePrototype({_update:function(e){var t=this;a.isCreation(e)||(t.context.data=e);for(var n=0;n<t.nodes.length;n++)t.nodes[n].update(t.context);t.context.data=null},_elementAppendTo:function(e){var t=this;t.$parent=e},_elementRemove:function(){for(var e=this,t=0;t<e.nodes.length;t++)e.nodes[t]._elementRemove();e.$parent=null}}),e.exports=c.FRAG},function(e,t,n){e.exports=n(15)},function(e,t,n){var r=n(3),o=n(50),i=r.generate(function(e,t){var n=this;n.defineProperties({bars:e,struct:t})});i.definePrototype({render:function(){var e=this;return new o(null,e.bars,e.struct)}}),e.exports=i},function(e,t,n){var r=n(3),o=n(8),i=(o.pathSpliter,o.pathResolver),a=r.generate(function(e,t,n){var r=this;r.data=e,r.fragment=t,r.context=null,r.path=n,r.__path=[],r.props={get key(){return!r.path.length&&r.context?r.context.props.key:r.path[r.path.length-1]},get index(){return!r.path.length&&r.context?r.context.props.index:r.path[r.path.length-1]}}});a.definePrototype({path:{get:function(){return this.__path||[]},set:function e(e){var t=this,n=t.fragment;if(t.data=null,t.context=null,"~"===e[0]&&n.fragment){for(;n.fragment;)n=n.fragment;t.context=n.context,e.shift()}else if(".."===e[0]&&n.fragment&&n.fragment.fragment)for(t.context=n.fragment.context;".."===e[0]&&t.context.context;)e=i(t.context.path,e),t.context=t.context.context;t.__path=e}},lookup:function(e){var t=this,n=0;if(!t.context&&t.fragment.fragment&&(t.context=t.fragment.fragment.context),"~"===e[0]&&t.context)return t.context.lookup(e);if(".."===e[0]&&t.context)return t.context.lookup(i(t.path,e));if("this"!==e[0]&&"."!==e[0]&&"~"!==e[0]&&"@"!==e[0]||(n=1),!t.data&&t.context&&(t.data=t.context.lookup(t.path)),t.data){for(var r="@"===e[0]?t.props:t.data;r&&n<e.length;n++)r=null!==r&&void 0!==r?r[e[n]]:void 0;return r}}}),e.exports=a},function(e,t,n){function r(e,t,n){function r(e){var i,a=[];if("literal"===e.type)i=e.value;else if("value"===e.type)i=n.lookup(e.path);else if("opperator"===e.type&&1===e.arguments.length)i=o[e.opperator](r(e.arguments[0]));else if("opperator"===e.type&&2===e.arguments.length)i="||"===e.opperator?r(e.arguments[0])||r(e.arguments[1]):"&&"===e.opperator?r(e.arguments[0])&&r(e.arguments[1]):o[e.opperator](r(e.arguments[0]),r(e.arguments[1]));else if("transform"===e.type){for(var s=0;s<e.arguments.length;s++)a.push(r(e.arguments[s]));if(!(t[e.name]instanceof Function))throw'Missing Transfrom: "'+e.name+'".';i=t[e.name].apply(null,a)}return i}return e?r(e):n.lookup(".")}var o=n(55);e.exports=r},function(e,t){t.add=function(e,t){return e+t},t.subtract=function(e,t){return e-t},t.multiply=function(e,t){return e*t},t.devide=function(e,t){return e/t},t.mod=function(e,t){return e%t},t["+"]=t.add,t["-"]=t.subtract,t["*"]=t.multiply,t["/"]=t.devide,t["%"]=t.mod,t.not=function(e){return!e},t["!"]=t.not,t.or=function(e,t){return e||t},t.and=function(e,t){return e&&t},t["||"]=t.or,t["&&"]=t.and,t.strictequals=function(e,t){return e===t},t.strictnotequals=function(e,t){return e!==t},t["==="]=t.strictequals,t["!=="]=t.strictnotequals,t.equals=function(e,t){return e==t},t.notequals=function(e,t){return e!=t},t.ltequals=function(e,t){return e<=t},t.gtequals=function(e,t){return e>=t},t["=="]=t.equals,t["!="]=t.notequals,t["<="]=t.ltequals,t[">="]=t.gtequals,t.lt=function(e,t){return e<t},t.gt=function(e,t){return e>t},t["<"]=t.lt,t[">"]=t.gt},function(e,t,n){var r=n(3),o=r.generate(function(){});o.definePrototype({log:function(){var e=Array.prototype.slice.call(arguments);e.unshift("Bars:"),console.log.apply(console,e)},upperCase:function(e){return String(e).toUpperCase()},lowerCase:function(e){return String(e).toLowerCase()},number:function(e){return Number(e)},string:function(e){return String(e)},reverse:function(e){return e.slice().reverse()},slice:function(e,t,n){return e.slice(t,n)},map:function(e,t){return e.map(function(n){return e[t]})},sort:function(e,t){return e.slice().sort(function(e,n){return t?e[t]<n[t]?-1:e[t]>n[t]?1:0:e<n?-1:e>n?1:0})},sum:function e(t,n){var r,e=0;if(n)for(r=0;r<t.length;r++)e+=t[r][n];else for(r=0;r<t.length;r++)e+=t[r];return e},ave:function(e,t){var n,r=0;if(t)for(n=0;n<e.length;n++)r+=e[n][t];else for(n=0;n<e.length;n++)r+=e[n];return r/e.length}}),e.exports=o},function(e,t,n){var r=n(3),o=n(5),i=r.generate(function(e,t){var n=this;n.reset(),n._buffer=e,n._file=t});i.definePrototype({reset:function(){var e=this;e.line=1,e.column=1,e._index=0,e._currentLine=0},currentLine:{get:function(){for(var e=this,t="",n=e._currentLine;n<e.length&&(t+=e._buffer[n],10!==e._buffer.codePointAt(n));)n++;return t}},buffer:{get:function(){var e=this;return e._buffer}},index:{get:function(){var e=this;return e._index},set:function(e){var t=this,n=t._index,r=!1;if(e=Math.min(t.length,e),e=Math.max(0,e),n!=e){for(n>e&&(t.reset(),n=t._index),10===t.buffer.codePointAt(n)&&(r=!0,n++);n<=e;n++)r?(t._currentLine=n,t.line++,r=!1):t.column++,10===t.buffer.codePointAt(n)&&(r=!0);t.column=e-t._currentLine+1,t._index=e}}},length:{get:function(){var e=this;return e._buffer.length}},next:function(){var e=this;return e.index++,e.charAt(e.index)},left:{get:function(){var e=this;return e._index<e.length}},charAt:function(e){var t=this;return t._buffer[e]||"EOF"},codePointAt:function(e){var t=this;return t._buffer.codePointAt(e)},slice:function(e,t){var n=this;return n._buffer.slice(e,t)},makeError:function(e,t,n){var r=this;o.assertTypeError(e,"number"),o.assertTypeError(t,"number"),o.assertTypeError(n,"string"),r.index=e;var i,a=r.currentLine,s=t-e,u="\n"===a[a.length-1]?"":"\n";for(i=1;i<r.column;i++)u+=" ";for(s=Math.min(s,a.length-u.length)||1,i=0;i<s;i++)u+="^";return"Syntax Error: "+n+" at "+(r._file?r._file+":":"")+r.line+":"+r.column+"\n\n"+a+u+"\n"}}),e.exports=i},function(e,t,n){var r=n(3),o=n(59),i=n(6),a=n(57),s=n(5),u=r.generate(function(e,t){var n=this;n.modeFormater=t.modeFormater||s.varThrough,n.charFormater=t.charFormater||s.varThrough,n.funcFormater=t.funcFormater||s.varThrough,n.typeFormater=t.typeFormater||s.varThrough,n.sourceFormater=t.sourceFormater||s.varThrough,n.parseModes=e,n.scope=new o});u.definePrototype({compile:function(e,t,n,r){var o=this,i=[];if(o.codeBuffer=new a(e,t),o.scope.verbose=r.verbose,r.verbose&&o.scope.printScope(),o.parseMode(n,i,r),r.verbose&&o.scope.printScope(),o.scope.length)throw code.makeError("Unexpected End Of Input.");return i},parseMode:function(e,t,n){function r(e,t,n){a.parseMode(e,t,n)}var o,a=this,u=a.scope,c=a.codeBuffer,l=a.parseModes[e],f=c.index;if(!l)throw new Error("Mode not found: "+JSON.stringify(e)+".");r.close=function(){this.closed=!0};e:for(;c.left;){for(var d=0;d<l.length;d++){var p=l[d];if(n.verbose&&console.log(s.repeat("  ",u.length+1)+a.modeFormater(e)+" "+a.funcFormater(p.name)+"\n"+s.repeat("  ",u.length+1)+s.bufferSlice(c,5,a.charFormater)),o=p(e,c,t,n,u,r)){if(o instanceof i&&(t.push(o),n.verbose&&console.log(s.repeat("  ",u.length+1)+a.typeFormater(o.constructor.name||o.type)+": "+a.sourceFormater(o.source()))),r.closed){delete r.closed;break e}break}}if(r.closed){delete r.closed;break e}if(f===c.index){if(o=new i(c),o.close(c),o.value=o.source(c),!n.noErrorOnILLEGAL)throw c.makeError(o.range[0],o.range[1],"ILLEGAL Token: "+JSON.stringify(o.source(c)));t.push(o)}f=c.index}}}),e.exports=u},function(e,t,n){var r=n(3),o=n(6),i=n(5),a=r.generate(function(){var e=this;e.defineProperties({_scope:[]})});a.definePrototype({push:function(e){var t=this;return i.assertError(o.isCreation(e),"Invalid Type."),t._scope.push(e),t.verbose&&t.printScope(),t._scope.length},pop:function(){var e=this,t=e._scope.pop();return e.verbose&&e.printScope(),t},close:function(){var e=this,t=e._scope.pop();return t.close(),e.verbose&&e.printScope(),t},printScope:function(){var e=this;console.log(["Main"].concat(e._scope.map(function(e){return e.constructor.name||e.type})).join(" => "))},token:{get:function(){var e=this;return e._scope[e._scope.length-1]}},length:{get:function(){var e=this;return e._scope.length}}}),e.exports=a},function(e,t){e.exports={quot:34,amp:38,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,euro:8364}},function(e,t){e.exports=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]},function(e,t,n){var r=n(63),o=n(11),i=n(69),a=r.generate(function(e){var t=this;e={cta:e,api:e.api,marketing:e.marketing,realTime:e.realTime,data:{showInteractions:!1,convo:e.api.user.convo},template:n(70),partials:{interactions:n(71),prompter:n(72)},transforms:{truncate:function(e,t){return e?e.length<t?e:e.slice(0,t)+"...":""},lastReceivedMessage:function(e){if(e=e.filter(function(e){return"message"===e.data.action&&"visitor"!==e.data.from}),e.length)return e[e.length-1]},avatar:function(t){var n=e.marketing.assetsUrl+"/avatars/";return t.avatar?t.avatar:n+Math.floor((t.email+"").length/7)+".jpg"}},interactions:{toggleInteractions:{event:"click",target:"[data-toggle-interactions]",action:function(e,t){var n=this;return n.set("inited",!0),n.set("showInteractions",!n.get("showInteractions")),n.scrollMessages(),n.$element.find("textarea").trigger("focus"),!1}},sendMessage:{event:"submit",target:"form[data-send-message]",action:function(e,t){var n={pusher:!0};!this.get("convo.data.agent.online")&&this.showBySchedule(this.get("convo.data.agent.schedules"))&&(n.twilio=!0);var r=this,o=t.find("textarea"),i=o.val().trim(),a={model:"event",data:{action:"message",message:{body:i},convo:r.get("convo.id"),user:r.get("convo.data.user.id"),cta:r.get("cta.id"),from:"visitor"},_publish:n};return!!i.length&&(o.val(""),r.api.post("/things",{thing:a},function(){}),r.addMessage(a),!1)}},enterPress:{event:"keypress",target:"textarea",action:function(e,t){if(13===(e.keyCode?e.keyCode:e.which))return t.closest("form").trigger("submit"),!1}}}},r.call(t,e),t.defineProperties({bell:new i.Howl({autoplay:!1,src:[t.marketing.assetsUrl+"/audio/pling.ogg",t.marketing.assetsUrl+"/audio/pling.mp3",t.marketing.assetsUrl+"/audio/pling.wav"]})}),t.realTime.connect(function(){t.binder=t.binder||t.realTime.channel.bind("event",function(e){if("message"===e.data.action&&"visitor"!==e.data.from){var n=t.$element.find(".prompter .bubble");t.addMessage(e),t.bell.stop(),t.bell.play(),n.hide().removeClass("animated bounceIn"),setTimeout(function(){n.show().addClass("animated bounceIn")},20)}})}),t.get("convo.events").length||t.emit("noMessages")});a.definePrototype({addMessage:function(e){var t=this,n=t.get("convo.events");n||t.set("convo.events",[]),n.push(e),t.update(),t.scrollMessages()},scrollMessages:function(){var e=this,t=e.$element.find(".interactions .messages");t.scrollTop(t[0].scrollHeight)}}),o.registerEvent("noMessages",function(){var e=this;e.cta.on(e.event,function(){e.trigger(function(){var t={data:{action:"message",from:"agent",agent:e.cta.get("convo.data.agent"),message:e.message}};e.cta.addMessage(t)})})}),e.exports=a},function(e,t,n){function r(e){return Object.keys(e).map(function(t){return e[t]})}var o=n(82),i=n(11),a=o.generate(function(e){var t=this,n=e.cta;if(o.call(t,e),t.set("cta",n),t.defineProperties({id:"cta-"+(n.id||Date.now()),api:e.api,marketing:e.marketing,realTime:e.realTime}),!t.isVisibleForPage(t.get("cta.visibility.show"),t.get("cta.visibility.hide")))return console.warn("CTA #"+t.id+" not visible for this page."),t.emit("notVisible");t.$element.addClass("cta cta-chat cta-position-"+n.data.position),t.$element.attr("id",t.id),n.data.colours&&t.$('<style type="text/css">\t            #'+t.id+" .primary-bg {\t                background: "+n.data.colours.primary+"\t            }\t        </style>").appendTo("body");for(var r in n.data.triggers||{})t.registerTrigger(n.data.triggers[r]);t.ready()});a.definePrototype(n(65)),a.definePrototype(n(64)),a.definePrototype({ready:function(){var e=this,t=e.get("cta.data.attach.strategy")||"appendTo",n=e.get("cta.data.attach.target")||"body";e.$element.hide(),e.$element[t](n),e.emit("ready")},registerTrigger:function(e){if(e.isActive){var t=this;e.cta=t,new i(e)}},isVisibleForPage:function(e,t){var n,o=window.location.href;e instanceof Array||(e=r(e||{0:"*"})),t instanceof Array||(t=r(t||{})),"string"==typeof e&&(e=e.replace(/\s+/,"").split(",")),"string"==typeof t&&(t=t.replace(/\s+/,"").split(","));for(var i=t.length-1;i>=0;i--)if(n=t[i],"string"==typeof n&&(n=new RegExp("^"+n.replace(/\*/g,"(.*?)")+"$")),n.test(o))return!1;for(var i=e.length-1;i>=0;i--)if(n=e[i],"string"==typeof n&&(n=new RegExp("^"+n.replace(/\*/g,"(.*?)")+"$")),n.test(o))return!0;return!1}}),i.registerEvent("scroll",function(){function e(){var u=r.scrollTop();if(a){var c=n(t.scroll).offset().top;u+o>=c&&(r.off("scroll",e),t.trigger())}else if(s){var l=(u+o)/i*100;l>=parseInt(t.scroll)&&(r.off("scroll",e),t.trigger())}else{var f=u+o;f>=parseInt(t.scroll)&&(r.off("scroll",e),t.trigger())}}var t=this,n=t.cta.$,r=n(window),o=n(window).height(),i=n(document).height(),a="string"==typeof t.scroll&&!/%|px/.test(t.scroll),s="string"==typeof t.scroll&&/%/.test(t.scroll);r.on("scroll",e)}),i.registerEvent("exit",function(){function e(){r.off("mouseleave",e),t.trigger()}var t=this,n=t.cta.$,r=n(document);r.on("mouseleave",e)}),e.exports=a},function(e,t,n){(function(e){function t(e){return("00"+e).slice(-2)}function n(e){return Object.keys(e).map(function(t){return e[t]})}function r(e){for(var t=e.toUTCString(),n=0;n<i.length;n++)if(t.indexOf(i[n])!==-1)return n}function o(e,o){if(!e)return!1;e instanceof Array||"undefined"==typeof e||(e=n(e)),o=new Date(o);for(var i=parseInt(t(o.getUTCHours())+t(o.getUTCMinutes())),a=0;a<e.length;a++){if(timeslot=e[a],parseInt(timeslot.start)>=2400&&(i=parseInt(t(o.getUTCHours()+24)+t(o.getUTCMinutes()+24))),parseInt(timeslot.start)>=2400){if(r(o)!==parseInt(timeslot.day)+1)continue}else if(r(o)!==parseInt(timeslot.day))continue;if(!(i<parseInt(timeslot.start)||i>parseInt(timeslot.finish)))return!0}return!1}var i=((new Date).getTimezoneOffset(),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);e.exports={showBySchedule:o},e.parent||(console.log(o([{day:6,start:2300,finish:2700}],"Sat Dec 24 2016 23:35:47 GMT-0000 (UTC)")?"√":"x","Inside of Schedules"),console.log(o([{day:6,start:2500,finish:2700},{day:0,start:2500,finish:2700}],"Sat Dec 24 2016 11:35:47 GMT-0400 (AST)")?"x":"√","Outside of Times"),console.log(o([{day:4,start:0,finish:2e3}],"Mon Dec 26 2016 11:35:47 GMT-0400 (AST)")?"x":"√","Outside of Days"),console.log(o([{day:2,start:400,finish:1600}],"Tue Dec 27 2016 8:35:47 GMT-0400 (AST)")?"√":"x","Inside of Days"),console.log(o([{day:2,start:2500,finish:2600}],"Wed Dec 28 2016 1:35:47 GMT-0000 (UTC)")?"√":"x","Works"))}).call(t,n(79)(e))},function(e,t){e.exports={show:function(){var e=this;e.$element.show()},hide:function(){var e=this;e.$element.hide()},toggle:function(){var e=this;e.$element.toggle()},fadeIn:function(){var e=this;e.$element.fadeIn()},fadeOut:function(){var e=this;e.$element.fadeOut()},fadeToggle:function(){var e=this;e.$element.fadeToggle()},slideToggle:function(){var e=this;e.$element.slideToggle()}}},function(e,t,n){var r=n(81),o=n(73),i=document.querySelector("script[data-remetric]"),a=n(84),s=n(67),u=n(74);u.parallel([function(e){return"object"==typeof jQuery?e():void o("//cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js",function(){e()})},function(e){o(i.dataset.css||"marketing.css",function(){e()})}],function(){var e=jQuery.noConflict(),t=new r({baseUrl:"http://"+i.dataset.remetric+".unstories.com/api",publishableKey:i.dataset.remetric,$:e});window.Marketing=new s({$:e,assetsUrl:i.dataset.css.replace("marketing.css","assets"),api:t,CTAs:{chat:n(62)},realTime:new a({public_key:"218ef838a5c8a8e2b92f",authEndpoint:t.baseUrl+"/socket/auth",auth:function(){return{headers:{Authorization:"Basic "+t.generateAuth()}}},onDisconnect:function(){}})})})},function(e,t,n){var r=n(12),o=n(68),i=r.generate(function(e){var t=this;t.defineProperties(e),t.defineProperties({ctas:[]}),t.findCTAs()});i.definePrototype({findCTAs:function(){var e=this,t=e.api.publishableKey+"-access-token",n=parseInt((new Date).toString().match(/([-\+][0-9]+)\s/)[1])/100;return e.api.get("/marketing",{access_token:o.get(t),time_zone_offset:n},function(n,r){if("object"==typeof r&&"object"==typeof r.user&&r.ctas instanceof Array){e.user=r.user,e.api.setUser(e.user),e.realTime.channelName="private-events-"+e.user.access_token,o.set(t,e.user.access_token,{expires:9125});for(var i=r.ctas.length-1;i>=0;i--)e.registerCTA(r.ctas[i])}})},registerCTA:function(e){var t=this;e.marketing=t,e.api=t.api,e.realTime=t.realTime,e.user=t.user,e.$=t.$,t.ctas.push(new t.CTAs[e.data.type](e));
}}),e.exports=i},function(e,t){t.defaults={},t.set=function(e,n,r){var o=r||{},i=t.defaults,a=o.expires||i.expires,s=o.domain||i.domain,u=void 0!=o.path?o.path:void 0!=i.path?i.path:"/",c=void 0!=o.secure?o.secure:i.secure,l=void 0!=o.httponly?o.httponly:i.httponly,f=a?new Date("number"==typeof a?(new Date).getTime()+864e5*a:a):"";document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+n.replace(/[^+#$&\/:<-\[\]-}]/g,encodeURIComponent)+(f&&f.getTime()>=0?";expires="+f.toUTCString():"")+(s?";domain="+s:"")+(u?";path="+u:"")+(c?";secure":"")+(l?";httponly":"")},t.get=function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n],o=r.length,i=r.indexOf("=");if(i=i<0?o:i,decodeURIComponent(r.substring(0,i).replace(/^\s+|\s+$/g,""))==e)return decodeURIComponent(r.substring(i+1,o))}return null},t.erase=function(e,n){t.set(e,"",{expires:-1,domain:n&&n.domain,path:n&&n.path,secure:0,httponly:0})}},function(e,t,n){var r,o;(function(n){/*!
	 *  howler.js v2.0.2
	 *  howlerjs.com
	 *
	 *  (c) 2013-2016, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||a;return e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),t.ctx||h(),"undefined"!=typeof e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&(t.masterGain.gain.value=e);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=t._howls[n]._soundById(r[o]);i&&i._node&&(i._node.volume=i._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t.ctx||h(),t._muted=e,t.usingWebAudio&&(t.masterGain.gain.value=e?0:t._volume);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=t._howls[n]._soundById(r[o]);i&&i._node&&(i._node.muted=!!e||i._muted)}return t},unload:function(){for(var e=this||a,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&"undefined"!=typeof e.ctx.close&&(e.ctx.close(),e.ctx=null,h()),e},codecs:function(e){return(this||a)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||a;if(e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var t=new Audio;"undefined"==typeof t.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||a,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(o||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||a,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),n=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(t||n)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(){var t=e.ctx.createBufferSource();t.buffer=e._scratchBuffer,t.connect(e.ctx.destination),"undefined"==typeof t.start?t.noteOn(0):t.start(0),t.onended=function(){t.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchend",r,!0)}};return document.addEventListener("touchend",r,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&"undefined"!=typeof e.ctx.suspend&&a.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&"undefined"!=typeof e.ctx.resume&&a.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.state="resuming",e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var a=new i,s=function(e){var t=this;return e.src&&0!==e.src.length?void t.init(e):void console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(e){var t=this;return a.ctx||h(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onresume=[],t._webAudio=a.usingWebAudio&&!t._html5,"undefined"!=typeof a.ctx&&a.ctx&&a.mobileAutoEnable&&a._enableMobileAudio(),a._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(a.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var r,o;if(e._format&&e._format[n])r=e._format[n];else{if(o=e._src[n],"string"!=typeof o){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}r=/^data:audio\/([^;,]+);/i.exec(o),r||(r=/\.([^.]+)$/.exec(o.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(a.codecs(r)){t=e._src[n];break}}return t?(e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new u(e),e._webAudio&&l(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if("undefined"==typeof e){e="__default";for(var o=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(o++,r=n._sounds[i]._id);1===o?e=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state&&!n._sprite[e])return n._queue.push({event:"play",action:function(){n.play(n._soundById(s._id)?s._id:void 0)}}),s._id;if(r&&!s._paused)return t||setTimeout(function(){n._emit("play",s._id)},0),s._id;n._webAudio&&a._autoResume();var u=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),l=1e3*c/Math.abs(s._rate);s._paused=!1,s._ended=!1,s._sprite=e,s._seek=u,s._start=n._sprite[e][0]/1e3,s._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,s._loop=!(!s._loop&&!n._sprite[e][2]);var f=s._node;if(n._webAudio){var d=function(){n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;f.gain.setValueAtTime(e,a.ctx.currentTime),s._playStart=a.ctx.currentTime,"undefined"==typeof f.bufferSource.start?s._loop?f.bufferSource.noteGrainOn(0,u,86400):f.bufferSource.noteGrainOn(0,u,c):s._loop?f.bufferSource.start(0,u,86400):f.bufferSource.start(0,u,c),l!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),l)),t||setTimeout(function(){n._emit("play",s._id)},0)},p="running"===a.state;"loaded"===n._state&&p?d():(n.once(p?"load":"resume",d,p?s._id:null),n._clearTimer(s._id))}else{var h=function(){f.currentTime=u,f.muted=s._muted||n._muted||a._muted||f.muted,f.volume=s._volume*a.volume(),f.playbackRate=s._rate,setTimeout(function(){f.play(),l!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),l)),t||n._emit("play",s._id)},0)},g="loaded"===n._state&&(window&&window.ejecta||!f.readyState&&a._navigator.isCocoonJS);if(4===f.readyState||g)h();else{var m=function(){h(),f.removeEventListener(a._canPlayEvent,m,!1)};f.addEventListener(a._canPlayEvent,m,!1),n._clearTimer(s._id)}}return s._id},pause:function(e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var o=t._soundById(n[r]);if(o&&!o._paused&&(o._seek=t.seek(n[r]),o._rateSeek=0,o._paused=!0,t._stopFade(n[r]),o._node))if(t._webAudio){if(!o._node.bufferSource)return t;"undefined"==typeof o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),o=0;o<r.length;o++){n._clearTimer(r[o]);var i=n._soundById(r[o]);if(i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(r[o]),i._node))if(n._webAudio){if(!i._node.bufferSource)return t||n._emit("stop",i._id),n;"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause());i&&!t&&n._emit("stop",i._id)}return n},mute:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if("undefined"==typeof t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),o=0;o<r.length;o++){var i=n._soundById(r[o]);i&&(i._muted=e,n._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,a.ctx.currentTime):i._node&&(i._node.muted=!!a._muted||e),n._emit("mute",i._id))}return n},volume:function(){var e,t,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&"undefined"==typeof r[1]){var o=n._getSoundIds(),i=o.indexOf(r[0]);i>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10));var s;if(!("undefined"!=typeof e&&e>=0&&e<=1))return s=t?n._soundById(t):n._sounds[0],s?s._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;"undefined"==typeof t&&(n._volume=e),t=n._getSoundIds(t);for(var u=0;u<t.length;u++)s=n._soundById(t[u]),s&&(s._volume=e,r[2]||n._stopFade(t[u]),n._webAudio&&s._node&&!s._muted?s._node.gain.setValueAtTime(e,a.ctx.currentTime):s._node&&!s._muted&&(s._node.volume=e*a.volume()),n._emit("volume",s._id));return n},fade:function(e,t,n,r){var o=this,i=Math.abs(e-t),s=e>t?"out":"in",u=i/.01,c=u>0?n/u:n;if(c<4&&(u=Math.ceil(u/(4/c)),c=4),"loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(e,t,n,r)}}),o;o.volume(e,r);for(var l=o._getSoundIds(r),f=0;f<l.length;f++){var d=o._soundById(l[f]);if(d){if(r||o._stopFade(l[f]),o._webAudio&&!d._muted){var p=a.ctx.currentTime,h=p+n/1e3;d._volume=e,d._node.gain.setValueAtTime(e,p),d._node.gain.linearRampToValueAtTime(t,h)}var g=e;d._interval=setInterval(function(e,n){u>0&&(g+="in"===s?.01:-.01),g=Math.max(0,g),g=Math.min(1,g),g=Math.round(100*g)/100,o._webAudio?("undefined"==typeof r&&(o._volume=g),n._volume=g):o.volume(g,e,!0),g===t&&(clearInterval(n._interval),n._interval=null,o.volume(g,e),o._emit("fade",e))}.bind(o,l[f],d),c)}}return o},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(n._interval),n._interval=null,t._emit("fade",e)),t},loop:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return n=r._soundById(parseInt(o[0],10)),!!n&&n._loop;e=o[0],r._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var i=r._getSoundIds(t),a=0;a<i.length;a++)n=r._soundById(i[a]),n&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){var o=n._getSoundIds(),i=o.indexOf(r[0]);i>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));var s;if("number"!=typeof e)return s=n._soundById(t),s?s._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;"undefined"==typeof t&&(n._rate=e),t=n._getSoundIds(t);for(var u=0;u<t.length;u++)if(s=n._soundById(t[u])){s._rateSeek=n.seek(t[u]),s._playStart=n._webAudio?a.ctx.currentTime:s._playStart,s._rate=e,n._webAudio&&s._node&&s._node.bufferSource?s._node.bufferSource.playbackRate.value=e:s._node&&(s._node.playbackRate=e);var c=n.seek(t[u]),l=(n._sprite[s._sprite][0]+n._sprite[s._sprite][1])/1e3-c,f=1e3*l/Math.abs(s._rate);!n._endTimers[t[u]]&&s._paused||(n._clearTimer(t[u]),n._endTimers[t[u]]=setTimeout(n._ended.bind(n,s),f)),n._emit("rate",s._id)}return n},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){var o=n._getSoundIds(),i=o.indexOf(r[0]);i>=0?t=parseInt(r[0],10):(t=n._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("undefined"==typeof t)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var s=n._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var u=n.playing(t)?a.ctx.currentTime-s._playStart:0,c=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(c+u*Math.abs(s._rate))}return s._node.currentTime}var l=n.playing(t);l&&n.pause(t,!0),s._seek=e,s._ended=!1,n._clearTimer(t),l&&n.play(t,!0),!n._webAudio&&s._node&&(s._node.currentTime=e),n._emit("seek",t)}return n},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){t[n]._paused||(e.stop(t[n]._id),e._emit("end",t[n]._id)),e._webAudio||(t[n]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(a._canPlayEvent,t[n]._loadFn,!1)),delete t[n]._node,e._clearTimer(t[n]._id);var r=a._howls.indexOf(e);r>=0&&a._howls.splice(r,1)}var o=!0;for(n=0;n<a._howls.length;n++)if(a._howls[n]._src===e._src){o=!1;break}return c&&o&&delete c[e._src],a.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var o=this,i=o["_on"+e];return"function"==typeof t&&i.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),o},off:function(e,t,n){var r=this,o=r["_on"+e],i=0;if(t){for(i=0;i<o.length;i++)if(t===o[i].fn&&n===o[i].id){o.splice(i,1);break}}else if(e)r["_on"+e]=[];else{var a=Object.keys(r);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(r[a[i]])&&(r[a[i]]=[])}return r},once:function(e,t,n){var r=this;return r.on(e,t,n,1),r},_emit:function(e,t,n){for(var r=this,o=r["_on"+e],i=o.length-1;i>=0;i--)o[i].id&&o[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(r,o[i].fn),0),o[i].once&&r.off(e,o[i].fn,o[i].id));return r},_loadQueue:function(){var e=this;if(e._queue.length>0){var t=e._queue[0];e.once(t.event,function(){e._queue.shift(),e._loadQueue()}),t.action()}return e},_ended:function(e){var t=this,n=e._sprite,r=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=a.ctx.currentTime;var o=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),o)}return t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),a._autoSuspend()),t._webAudio||r||t.stop(e._id),t},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new u(e)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;r>=0;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){var t=this;if("undefined"==typeof e){for(var n=[],r=0;r<t._sounds.length;r++)n.push(t._sounds[r]._id);return n}return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=a.ctx.createBufferSource(),e._node.bufferSource.buffer=c[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,t},_cleanBuffer:function(e){var t=this;if(t._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=t._scratchBuffer}catch(e){}}return e.bufferSource=null,t}};var u=function(e){this._parent=e,this.init()};u.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=Math.round(Date.now()*Math.random()),t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=a._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node="undefined"==typeof a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),e._node.gain.setValueAtTime(n,a.ctx.currentTime),e._node.paused=!0,e._node.connect(a.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(a._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=n*a.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=Math.round(Date.now()*Math.random()),e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(a._canPlayEvent,e._loadFn,!1)}};var c={},l=function(e){var t=e._src;if(c[t])return e._duration=c[t].duration,void p(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);d(r.buffer,e)}else{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){var t=(i.status+"")[0];return"0"!==t&&"2"!==t&&"3"!==t?void e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+"."):void d(i.response,e)},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete c[t],e.load())},f(i)}},f=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){a.ctx.decodeAudioData(e,function(e){e&&t._sounds.length>0&&(c[t._src]=e,p(t,e))},function(){t._emit("loaderror",null,"Decoding audio data failed.")})},p=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},h=function(){try{"undefined"!=typeof AudioContext?a.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(e){a.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),t=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());(a._navigator&&a._navigator.standalone&&!r||a._navigator&&!a._navigator.standalone&&!r)&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain="undefined"==typeof a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.value=1,a.masterGain.connect(a.ctx.destination)),a._setup()};r=[],o=function(){return{Howler:a,Howl:s}}.apply(t,r),!(void 0!==o&&(e.exports=o)),t.Howler=a,t.Howl=s,"undefined"!=typeof window?(window.HowlerGlobal=i,window.Howler=a,window.Howl=s,window.Sound=u):"undefined"!=typeof n&&(n.HowlerGlobal=i,n.Howler=a,n.Howl=s,n.Sound=u)}(),/*!
	 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
	 *  
	 *  howler.js v2.0.2
	 *  howlerjs.com
	 *
	 *  (c) 2013-2016, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;return r.ctx&&r.ctx.listener?(t="number"!=typeof t?r._pos[1]:t,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e?r._pos:(r._pos=[e,t,n],r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,n,r,o,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,r="number"!=typeof r?s[3]:r,o="number"!=typeof o?s[4]:o,i="number"!=typeof i?s[5]:i,"number"!=typeof e?s:(a._orientation=[e,t,n,r,o,i],a.ctx.listener.setOrientation(e,t,n,r,o,i),a)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:"undefined"!=typeof t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:0,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:"inverse",maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:1e4,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:"HRTF",refDistance:"undefined"!=typeof t.refDistance?t.refDistance:1,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var o="undefined"==typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"==typeof n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var i=r._getSoundIds(n),a=0;a<i.length;a++){var s=r._soundById(i[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,o),"spatial"===o?s._panner.setPosition(t,0,0):s._panner.pan.value=t),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(t,n,r,o)}}),i;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,"undefined"==typeof o){if("number"!=typeof t)return i._pos;i._pos=[t,n,r]}for(var a=i._getSoundIds(o),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,n,r],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),u._panner.setPosition(t,n,r)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(t,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(t,n,r,o)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,r="number"!=typeof r?i._orientation[2]:r,"undefined"==typeof o){if("number"!=typeof t)return i._orientation;i._orientation=[t,n,r]}for(var a=i._getSoundIds(o),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,n,r],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),e(u,"spatial")),u._panner.setOrientation(t,n,r)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var t,n,r,o=this,i=arguments;if(!o._webAudio)return o;if(0===i.length)return o._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return r=o._soundById(parseInt(i[0],10)),r?r._pannerAttr:o._pannerAttr;t=i[0],"undefined"==typeof n&&(o._pannerAttr={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:"undefined"!=typeof t.coneOuterAngle?t.coneOuterAngle:o._coneOuterAngle,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:o._coneOuterGain,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:o._distanceModel,maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:o._maxDistance,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:o._panningModel,refDistance:"undefined"!=typeof t.refDistance?t.refDistance:o._refDistance,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:o._rolloffFactor})}else 2===i.length&&(t=i[0],n=parseInt(i[1],10));for(var a=o._getSoundIds(n),s=0;s<a.length;s++)if(r=o._soundById(a[s])){var u=r._pannerAttr;u={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:"undefined"!=typeof t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:u.maxDistance,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:u.panningModel,refDistance:"undefined"!=typeof t.refDistance?t.refDistance:u.refDistance,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:u.rolloffFactor};var c=r._panner;c?(c.coneInnerAngle=u.coneInnerAngle,c.coneOuterAngle=u.coneOuterAngle,c.coneOuterGain=u.coneOuterGain,c.distanceModel=u.distanceModel,c.maxDistance=u.maxDistance,c.panningModel=u.panningModel,c.refDistance=u.refDistance,c.rolloffFactor=u.rolloffFactor):(r._pos||(r._pos=o._pos||[0,0,-.5]),e(r,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e,t){t=t||"spatial","spatial"===t?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.value=e._stereo),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id)}}()}).call(t,function(){return this}())},function(e,t){e.exports="{{#if cta}}\n    {{>prompter}}\n    {{>interactions}}\n{{/if}}\n"},function(e,t){e.exports='<div class="interactions {{#if inited}}animated {{#if showInteractions}}fadeInUp{{else}}fadeOutDown{{/if}}{{/if}}">\n     <a href="#" class="head primary-bg" data-toggle-interactions>\n         <h2>\n            {{cta/name}}\n            <span>-</span>\n         </h2>\n     </a>\n\n     <div class="meta">\n         <a>\n             <img src="{{@avatar(convo/data/agent)}}" class="primary-bg">\n         </a>\n         <p>You\'re chatting with<br><strong>{{convo/data/agent/name}}</strong></p>\n     </div>\n\n     <ul class="messages">\n         {{#each convo/events}}\n             <li class="bubble animated {{#if data/from === \'agent\'}}primary-bg from-agent slideInRight{{else}}{{#if data/from === \'system\'}}from-system slideInUp{{else}}slideInUp{{/if}}{{/if}}">\n                {{data/message/body}}\n            </li>\n         {{/each}}\n\n         <li class="bubble new-message-wrapper">\n             <form data-send-message>\n                 <textarea placeholder="Your message here..."></textarea>\n             </form>\n         </li>\n     </ul>\n </div>\n'},function(e,t){e.exports='<a href="#" class="prompter" data-toggle-interactions>\n    {{#with @lastReceivedMessage(convo/events)}}\n        <p class="bubble from-agent primary-bg animated bounceIn">\n            {{@truncate(data/message/body, 105)}}\n        </p>\n    {{/with}}\n    <img src="{{@avatar(convo/data/agent)}}" class="primary-bg animated fadeIn">\n</a>\n'},function(e,t,n){function r(e,t){var n=null;"js"===e.slice(e.lastIndexOf(".")+1,e.length)?(n=document.createElement("script"),n.type="text/javascript",n.src=e):(n=document.createElement("link"),n.setAttribute("href",e),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css")),n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,"function"==typeof t&&t())}:n.onload=function(){"function"==typeof t&&t()},document.getElementsByTagName("head")[0].appendChild(n)}e.exports=r},function(e,t,n){e.exports={parallel:n(77),series:n(78),eachSeries:n(76),eachParallel:n(75)}},function(e,t){function n(e,t,n){if(!e.length)return n([],[]);for(var r=[],o=[],i=e.length-1,a=0,s=0;s<=i;s++)t(e[s],function(e,t){e&&o.push(e),r.push(t),a===i&&"function"==typeof n&&n(o,r),a++})}e.exports=n},function(e,t){function n(e,t,n){if(!e.length)return n(null,[]);if("function"!=typeof t)throw new Error(t+" is not a function.");r(e,t,0,n,[])}function r(e,t,n,o,i){t(e[n++],function(a,s){return i.push(s),a||n===e.length?o(a,i):void r(e,t,n,o,i)})}e.exports=n},function(e,t){function n(e,t){if(!e.length)return t([],[]);for(var n=[],r=[],o=e.length-1,i=0,a=0;a<=o;a++)e[a](function(e,a){e&&r.push(e),n.push(a),i===o&&"function"==typeof t&&t(r,n),i++})}e.exports=n},function(e,t){function n(e,t){return e.length?void r(e,0,t,[]):t(null,[])}function r(e,t,n,o){e[t++](function(i,a){return o.push(a),i||t===e.length?n(i,o):void r(e,t,n,o)})}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),o=c.length,u=0;u<o;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){var r=n(7),o=r.generate(function(e){var t=this;t.defineProperties({$:e.$,baseUrl:e.baseUrl||"http://"}),t.defineProperties({writable:!0},{publishableKey:e.publishableKey,accessToken:e.accessToken})});o.definePrototype({setUser:function(e){var t=this;e.email.indexOf("remetric.com")!==-1&&(e.email=void 0),t.user=e,e.access_token&&(t.accessToken=e.access_token),t.org=e.org},authenticate:function(e){var t=this;t.get("/me",{time_zone_offset:parseInt((new Date).toString().match(/([-\+][0-9]+)\s/)[1])/100},function(n,r){return n?e(n):(t.setUser(r),void e(n,r))})},register:function(e){var t=this;t.get("/register",{category:"marketing",publishable_key:t.publishableKey},function(n,r){return n?e(n):(t.setUser(r),t.publishableKey=r.publishable_key,e(null,r),void("function"==typeof window.afterRemetricRegister&&window.afterRemetricRegister(r)))})}}),o.definePrototype({generateAuth:function(){var e=this;return btoa(e.publishableKey+":"+e.accessToken)},request:function(e,t,n,r){var o=this,i={method:e,url:o.baseUrl+t+(t.length>1?".json":""),data:n,beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+o.generateAuth())},success:function(e){r(null,e)},error:function(e){r(e)}};return"get"===e?i.contentType="json":i.dataType="json",o.$.ajax(i)},get:function(e,t,n){var r=this;r.request("get",e,t,n)},post:function(e,t,n){var r=this;r.request("post",e,t,n)},patch:function(e,t,n){var r=this;r.request("patch",e,t,n)},patch:function(e,t,n){var r=this;r.request("patch",e,t,n)}}),e.exports=o},function(e,t,n){function r(e){for(var t in e)e[t]&&"object"==typeof e[t]&&(Object.keys(e[t]).length?r(e[t]):delete e[t])}var o=n(7),i=n(80),a=n(13),s=new a,u=o.generateFrom(i.EventEmitter,function(e){var t=this,n=e.interactions,r=e.partials,o=e.transforms,i=e.template,a=e.data||{},s=e.$||window.jQuery.noConflict(),u=s(e.$element||"<div>");delete e.$,delete e.$element,delete e.interactions,delete e.partials,delete e.transforms,delete e.template,delete e.data,t.defineProperties({$element:u,$:s}),t.defineProperties({writable:!0},{_data:a}),t.registerInteractions(n),t.registerPartials(r),t.registerTransforms(o),t.registerTemplate(i)});u.definePrototype({update:function(){var e=this;e.dom.update(e._data)},render:function(){var e=this;e.$element.html(""),e.dom=e.template.render(e._data),e.dom.appendTo(e.$element[0]),e.update()}}),u.definePrototype({set:function(e,t){this._data="object"==typeof this._data?this._data:{};for(var n=this,r=e.split(/\/|\./),o=r.pop(),i=n._data,a=0;a<r.length;a++)"object"!=typeof i[r[a]]&&(i[r[a]]={}),i=i[r[a]];return i[o]=t,n.update(),t},unset:function(e){this._data="object"==typeof this._data?this._data:{};for(var t=this,n=e.split(/\/|\./),o=n.pop(),i=t._data,a=0;a<n.length;a++)"object"!=typeof i[n[a]]&&(i[n[a]]={}),i=i[n[a]];delete i[o],r(t._data),t.update()},get:function(e){for(var t=this,n=e.split(/\/|\./),r=n.pop(),o=t._data,i=0;i<n.length;i++)if(o=o[n[i]],!o)return;return o[r]}}),u.definePrototype({registerTemplate:function(e){var t=this;t.template=s.compile(e),t.render()},registerInteractions:function(e){var t,n,r=this,o=r.$element;for(n in e)t=e[n],t.target?o.on(t.event,t.target,r.__eventAction(t)):o.on(t.event,r.__eventAction(t))},registerPartials:function(e){var t;for(t in e)s.registerPartial(t,e[t])},registerTransforms:function(e){var t;for(t in e)s.registerTransform(t,e[t])}}),u.definePrototype({__eventAction:function(e){var t=this;return function(n){return e.action.call(t,n,t.$(this))}}}),e.exports=u},function(e,t){e.exports=function(e,t){var n=null;/js/.test(e)?(n=document.createElement("script"),n.type="text/javascript",n.src=e):(n=document.createElement("link"),n.setAttribute("href",e),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css")),n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,"function"==typeof t&&t())}:n.onload=function(){"function"==typeof t&&t()},document.getElementsByTagName("head")[0].appendChild(n)}},function(e,t,n){var r=n(7),o=n(83),i=r.generate(function(e){var t=this;t.defineProperties(e),t.defineProperties({writable:!0},{initialized:!1,connected:!1})});i.definePrototype({connect:function(e){var t=this;return t.initialized?e():(t.initialized=!0,void o("https://js.pusher.com/3.2/pusher.min.js",function(){var n=new Pusher(t.public_key,{authEndpoint:t.authEndpoint,auth:t.auth(),encrypted:!0});n.connection.bind("connected",function(){t.connected=!0}),n.connection.bind("disconnected unavailable",function(){t.connected=!1,t.onDisconnect()}),window.onbeforeunload=function(){t.onDisconnect()},t.channel=n.subscribe(t.channelName),t.debug&&console.debug("realtime     ~>","Subscribed to "+t.channelName),e()}))}}),e.exports=i}]);